
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>How to Make All the Flights You Want &#8212; Intro to ML</title>
    
  <link rel="stylesheet" href="_static/css/index.73d71520a4ca3b99cfee5594769eaaae.css">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/sphinx-book-theme.40e2e510f6b7d1648584402491bb10fe.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.3da636dd464baa7582d2.js">

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.d31b09fe5c1d09cb49b26a786de4a05d.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="index.html">
  
  
  <h1 class="site-logo" id="site-title">Intro to ML</h1>
  
</a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <ul class="nav sidenav_l1">
 <li class="toctree-l1 current active">
  <a class="reference internal" href="#">
   How to Make All the Flights You Want
  </a>
 </li>
</ul>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/Framing.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

        <!-- Source interaction buttons -->


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/executablebooks/jupyter-book/master?urlpath=tree/Framing.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#part-1-framing-the-problem">
   Part 1: Framing the Problem
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-much-a-dollar-cost">
     How much a dollar cost?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#but-why-models">
     But why models?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#math-for-real-this-time">
     Math for real this time
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#first-cut-an-exponential-distribution">
     First cut: An exponential distribution
    </a>
   </li>
  </ul>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="how-to-make-all-the-flights-you-want">
<h1>How to Make All the Flights You Want<a class="headerlink" href="#how-to-make-all-the-flights-you-want" title="Permalink to this headline">¶</a></h1>
<div class="section" id="part-1-framing-the-problem">
<h2>Part 1: Framing the Problem<a class="headerlink" href="#part-1-framing-the-problem" title="Permalink to this headline">¶</a></h2>
<p>My father and I were born a week short of 41 years apart from one another. As you might expect, there are many things on which we (respectfully) don’t always see eye-to-eye. But few topics are as contentious between us as the appropriate amount of lead time before a flight with which one should arrive at the airport.</p>
<p>To be fair, his grievances with my airport habits are not without some empirical basis. My record, particularly in my early twenties, has been less than stellar when it comes to missing flights. But even with these, let’s call them missteps, I find it hard to justify the two hour window for which he frequently advocates.</p>
<p>In fact, I find it interesting just how lacking in consensus the public is on the issue (as Twitter responses to an Atlantic article from a couple years ago brought into focus). Here is a phenomenon that many of us experience hundreds, sometimes even <em>thousands</em> of times in our life, and yet we arrive at widely different conclusions about how to approach it.</p>
<p>This notebook will attempt to address this apparent inconsistency first by framing an argument, mathematically, about <em>why</em> one would arrive at the airport at one time compared to another, and then by calculating (or, rather, estimating) the arrival time which <em>optimizes</em> that criterion. In doing so, we can point out which steps in the argument lead to disagreement, and we can evaluate how we can argue about those points.</p>
<div class="section" id="how-much-a-dollar-cost">
<h3>How much a dollar cost?<a class="headerlink" href="#how-much-a-dollar-cost" title="Permalink to this headline">¶</a></h3>
<p>So let’s begin by framing the problem. To begin with, I’ll mention that I’m not interested in diversions of the form “well what if you have TSA pre?” or “well what if my flight is at midnight on a Wednesday?”. As we’ll see shortly, these protests do nothing to alter the form of the argument, only particular <em>parameters</em> in it that we’ll treat in a fully general manner. For the purposes of discussion, just assume I’m talking about a generic heavily trafficked airport on a generic heavily trafficked time and day, say 9 AM on a Monday or 5 PM on a Friday. Once the form of the argument becomes clear, feel free to sub in the appropriate language for your own hypothetical.</p>
<p>I’m also not concerned with what time you leave your house, just what time you arrive at the airport. I trust that your sense of traffic, or at the very least your smart phone’s, is sufficiently well honed that you can map from one to the other. If it isn’t, well that’s another issue entirely.</p>
<p>With that in mind, let’s begin with this question: why don’t you just arrive at the airport five minutes before boarding? The obvious answer is that this would make you very likely to miss your flight, which most people might find unpleasant because it both might cost them money in the form of a re-booking fee, and might keep them from getting to the place that they would rather be.</p>
<p>On the flip side, why not just arrive, say, 5 hours early? You’d be almost guaranteed to never miss a flight, and you probably have emails you need to catch up on anyway. The once again obvious answer is that most people just don’t really enjoy being at airports. Even if you do find waiting at the gate to be a nice opportunity to read or respond to people you’ve been ignoring for weeks, the returns on that joy diminish pretty quickly after an hour or so.</p>
<p>In both cases, it seems, we’re interested in avoiding some <strong>cost</strong>. Those costs can be both material, in the form of fees or lost wages, or more abstract, in the form of missed time at your destination or boredom at the gate. The time we choose to arrive reflects, at least implicitly, our best efforts to balance between these costs.</p>
<p>The issue is that we don’t, in general, know in advance how much of each cost we’re likely to incur. If I <em>knew</em> that it was going to take me exactly ten minutes and twenty three seconds to get from the doors of the airport to my gate, I would just arrive ten minutes and twenty three seconds before boarding. This way, I would never spend any time waiting, and I would be guaranteed to make my flight.</p>
<p>But even though we don’t <em>know</em> what particular value these <strong>random variables</strong> are going to take on any particular trip, we tend to act on, again at the very least implicit, estimates of how they’re <strong>distributed</strong>. I don’t arrive 5 hours early because the I know that the likelihood of getting to the gate taking that long is very low. Accordingly, my likelihood of incurring costs associated with missing my flight is low as well. On the other hand, my likelihood of incurring a lot of bored-at-the-gate cost is high. So we’re not just interested in balancing cost, but in balancing <strong>risk</strong>, cost times the probability of incurring that cost.</p>
<p>So what if we described these costs and their probabilities mathematically as a function of how early we arrive at the airport? Then we could find the arrival time which minimizes the <strong>expected cost</strong>, the cost we’ll incur <em>on average</em> over the hundreds of flights in our lifetime. We might not act optimally on any one trip (i.e. not arrive at the gate precisely when boarding starts), but, over many trips, we’ll incur (approximately) the least possible cost given our uncertainty.</p>
</div>
<div class="section" id="but-why-models">
<h3>But why models?<a class="headerlink" href="#but-why-models" title="Permalink to this headline">¶</a></h3>
<p>Here comes the math, so if this isn’t your thing feel free to skim. But I still think there’s some value in the structure of the argument, even for the lay reader. What I’m going to do is propose a <strong>model</strong> for the total cost incurred <span class="math notranslate nohighlight">\(C\)</span> as a function of the amount of time <span class="math notranslate nohighlight">\(\tau\)</span> we arrive before our flight (or we can measure this with respect to boarding time if you prefer, it doesn’t really make a difference), <span class="math notranslate nohighlight">\(C(\tau)\)</span>.</p>
<p>One key point to keep in mind here is that our own personal cost functions emerge from some complicated, subconciously computed combination of real costs and our own personal tastes and preferences (e.g. some people like hanging out at airports more than others). It would be foolish to believe that we could come up with some formula that succinctly captures these bizarre subtleties of human psychology. Rather, I’ll propose an extremely simple model with easily interpretable <strong>parameters</strong> that you can plug based on your <em>own</em> preferences. The question I’m ultimately interested in, therefore, is if we’re willing to quantify our own cost functions within the context of this model, can we derive a corresponding optimal arrival time?</p>
<p>Let’s make things more concrete before we dig more into that. The model I’ll adopt is this: let’s assume that waiting at the gate accrues some constant cost per unit time <span class="math notranslate nohighlight">\(c_w\)</span>, so that if we wait at the gate for <span class="math notranslate nohighlight">\(T\)</span> minutes the total cost we incur is <span class="math notranslate nohighlight">\(c_{w}T\)</span>, in some as-yet-undefined cost unit (remember, the unit itself doesn’t matter since we’re really just interested in the time that minimizes <em>any</em> cost unit). However, if we miss our flight, we incur some fixed cost <span class="math notranslate nohighlight">\(C_m\)</span>, which does <em>not</em> depend on time. Therefore, if we assume that getting from the door to the gate takes some amount of time <span class="math notranslate nohighlight">\(t\)</span>, then we can describe <span class="math notranslate nohighlight">\(C(\tau)\)</span> as:</p>
<div class="math notranslate nohighlight">
\[\begin{split}C(\tau) = \begin{cases}
    c_{w}(\tau-t) &amp; t \leq \tau \\
    C_m &amp; t &gt; \tau \\
    \end{cases}
\end{split}\]</div>
<p>So let’s start with the question: why this model? After all, the implication seems to be that each minute spent waiting at the airport is as painful as the last, and anyone who has had a flight delayed multiple hours knows that first minute of the fourth hour is much worse than the first one of the first hour. And the fixed cost for missing a flight seems off too: missing a flight by an hour makes it harder to talk your way onto the next one, and means you’ll be even later to wherever it is you want to go.</p>
<p>These issues notwithstanding, I’m adopting this model for the same reasons we adopt most models in science: it turns out we can solve it for some real answers! And what’s more, the answers we <em>get</em> from it turn out to be pretty compelling. Once we have these answers, we can analyze any deficiencies they might have and tie them back to deficiencies the model in order to improve it.</p>
<p>Another part of the answer to this question is that I really don’t have any good reason to pick more complicated models. Or, rather, I don’t have any good reason to pick one more complicated model over another. Maybe there should be a <span class="math notranslate nohighlight">\(t^2\)</span> term somewhere in there, but why not a <span class="math notranslate nohighlight">\(t^1.5\)</span>, or <span class="math notranslate nohighlight">\(log{t}\)</span>? (I’m being a bit asinine here: there are good reasons to believe most functions of interest can be approximated by polynomials.) Without good <em>a priori</em> motivation, picking one over the other could only be validated by checking whether it produces “good” answers anyway, so we may as well start simple and go from there.</p>
<p>Moreover, the cost of this added complexity is less “interpretability” (a term I put in quotes because I have a lot of issues with how it gets thrown around these days, but that’s a notebook for another day). What’s nice about this model is that, as we’ll see, it ends up depending on just one parameter that you, the person using it for your decision making, need to pick in order to reflect your own cost functions. This value is <span class="math notranslate nohighlight">\(\frac{C_m}{c_w}\)</span>, which I’ll refer to as your <strong>cost ratio</strong> <span class="math notranslate nohighlight">\(R\)</span>. Looking at the units of <span class="math notranslate nohighlight">\(R\)</span>, we see that it has <span class="math notranslate nohighlight">\(\frac{\text{cost}}{\frac{\text{cost}}{\text{time}}} = \text{time}\)</span>. We can interpret <span class="math notranslate nohighlight">\(R\)</span> as the <em>amount of time that you would need to wait at the airport before you considered it as bad as missing your flight</em>. This value will be unique not just to each person, but even to each trip for each person (e.g. missing your friend’s wedding would be presumably worse than starting a vacation a couple hours later). The point is, if we’re willing to <em>pick a value for</em> <span class="math notranslate nohighlight">\(R\)</span>, we’ll be able to find the ideal arrival time <em>for</em> that value.</p>
<p>To this end, I want to draw a distinction here between disagreements that might occur due to issues with the model itself, to which I would respectfully respond that you provide a model of your own to compare, versus those disagreements that arise <em>from</em> the model. And here we’ve already encountered one: what value of <span class="math notranslate nohighlight">\(R\)</span> do we choose? My value of <span class="math notranslate nohighlight">\(R\)</span> clearly differs from my father’s, and this plays a big part in why we arrive at such different conclusions for when to arrive at the airport.</p>
<p>We are, of course, free to disagree about <em>why</em> we’ve picked one <span class="math notranslate nohighlight">\(R\)</span> value versus another. My dad might think that my relatively low <span class="math notranslate nohighlight">\(R\)</span> choice reflects financial imprudence or a lack of punctuality, and I might think that his relatively high <span class="math notranslate nohighlight">\(R\)</span> choice insufficiently values time spend at home doing nothing. But at least now we know that we’re arguing about <em>values</em>, and we know <em>which values</em> we’re arguing about. Moreover, we’ll develop the mathematical scaffolding to map from this values choice to an arrival time, and have a precise sense for how our values disagreements give rise to disparate conclusions.</p>
</div>
<div class="section" id="math-for-real-this-time">
<h3>Math for real this time<a class="headerlink" href="#math-for-real-this-time" title="Permalink to this headline">¶</a></h3>
<p>Ok, this has been a lot of talking. Let’s dig into this model. So we have our cost function</p>
<div class="math notranslate nohighlight">
\[\begin{split}C(\tau) = \begin{cases}
    c_{w}(\tau-t) &amp; t \leq \tau \\
    C_m &amp; t &gt; \tau \\
    \end{cases}.
\end{split}\]</div>
<p>But as we pointed out above, the key problem in this whole affair is that <span class="math notranslate nohighlight">\(t\)</span> is a random variable (or, more precisely in the context above, represents a particular realization of a random variable <span class="math notranslate nohighlight">\(T\)</span>). So, as we mentioned above, we want to minimize our expected cost over some distribution <span class="math notranslate nohighlight">\(p(t)\)</span> of this random variable</p>
<div class="math notranslate nohighlight">
\[\mathbb{E}_{t \sim p(t)}\big{[}C(\tau)\big{]} = \int_{0}^{\tau}(\tau - t)c_{w}p(t)dt + \int_{\tau}^{\infty}C_Mp(t)dt.\]</div>
<p>So in order to find the value of <span class="math notranslate nohighlight">\(\tau\)</span> that minimizes this, which we’ll call <span class="math notranslate nohighlight">\(\tau^*\)</span>, we’ll just take the derivative with respect to <span class="math notranslate nohighlight">\(\tau\)</span> and set it equal to <span class="math notranslate nohighlight">\(0\)</span></p>
<div class="math notranslate nohighlight">
\[\frac{d\mathbb{E}[C(\tau)]}{d\tau} = c_w\int_{0}^{\tau}{p(t)dt} - C_m p(\tau)\]</div>
<div class="math notranslate nohighlight">
\[\Rightarrow\ \ \ \ c_w\int_{0}^{\tau^*}{p(t)dt} - C_m p(\tau^*) = 0\]</div>
<p>If we let <span class="math notranslate nohighlight">\(P(t)\)</span> represent the <strong>cumulative density function</strong> of <span class="math notranslate nohighlight">\(p(t)\)</span>, <span class="math notranslate nohighlight">\(P(t) = \int_{0}^{t}p(t')dt'\)</span>, then we can finegle this into the neat form</p>
<div class="math notranslate nohighlight">
\[\frac{d\log{P(t)}}{dt}\biggr\rvert_{\tau^*} = \frac{1}{R}.\]</div>
<p>I will admit that I don’t as of yet have a nice intuitive explanation for this equation, but it is both exceptionally convenient and <em>fully general</em> to <em>any</em> distribution <span class="math notranslate nohighlight">\(P(t)\)</span> (which we haven’t yet specified). This makes this equation <em>exact</em>, conditioned on our acceptance of the underlying cost model. Let’s start with a simple distribution for <span class="math notranslate nohighlight">\(T\)</span>, the exponential, and see if we can solve this equation exactly.</p>
</div>
<div class="section" id="first-cut-an-exponential-distribution">
<h3>First cut: An exponential distribution<a class="headerlink" href="#first-cut-an-exponential-distribution" title="Permalink to this headline">¶</a></h3>
<p>More precisely, let’s assume that the distribution of time it takes for us to get from the door to the gate is</p>
<div class="math notranslate nohighlight">
\[p(T = t) = \lambda e^{-\lambda t}\]</div>
<p>where <span class="math notranslate nohighlight">\(\lambda\)</span> is called a parameter of the distribution. The choice of this form of distribution picks some general family of <em>shapes</em> that our distribution can take, and the choice of value of the parameter(s) decides which member of this family we use. How we pick a particular parameter value is the key exercise in the science of statistics, and is generally done by ensuring that the corresponding distribution matches well with some observed data (this is called <strong>fitting</strong> the parameters to the data). We’ll take a look at how we can do this in the next section.</p>
<p>For now, let’s take a look at a few different values of <span class="math notranslate nohighlight">\(\lambda\)</span> to see what I mean by the “shape” of the distribution.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">expon</span>
<span class="kn">from</span> <span class="nn">bokeh.io</span> <span class="kn">import</span> <span class="n">output_notebook</span><span class="p">,</span> <span class="n">show</span>
<span class="kn">import</span> <span class="nn">plot_utils</span>
<span class="n">output_notebook</span><span class="p">()</span>

<span class="n">dists</span> <span class="o">=</span> <span class="p">{</span><span class="sa">f</span><span class="s2">&quot;Lambda </span><span class="si">{</span><span class="n">l</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">:</span> <span class="n">expon</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="mf">1.</span><span class="o">/</span><span class="n">l</span><span class="p">)</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="p">[</span><span class="mf">0.02</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">]}</span>
<span class="n">plot_kwargs</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Exponential Distributions for Airport Time&quot;</span><span class="p">,</span>
    <span class="s2">&quot;x_axis_label&quot;</span><span class="p">:</span> <span class="s2">&quot;Minutes from door to gate&quot;</span><span class="p">,</span>
    <span class="s2">&quot;y_axis_label&quot;</span><span class="p">:</span> <span class="s2">&quot;Probability&quot;</span>
<span class="p">}</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">plot_utils</span><span class="o">.</span><span class="n">plot_distributions</span><span class="p">(</span><span class="n">dists</span><span class="p">,</span> <span class="n">x_max</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">plot_kwargs</span><span class="o">=</span><span class="n">plot_kwargs</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<div class="bk-root">
    <a href="https://bokeh.org" target="_blank" class="bk-logo bk-logo-small bk-logo-notebook"></a>
    <span id="1001">Loading BokehJS ...</span>
</div></div><script type="application/javascript">
(function(root) {
  function now() {
    return new Date();
  }

  var force = true;

  if (typeof root._bokeh_onload_callbacks === "undefined" || force === true) {
    root._bokeh_onload_callbacks = [];
    root._bokeh_is_loading = undefined;
  }

  var JS_MIME_TYPE = 'application/javascript';
  var HTML_MIME_TYPE = 'text/html';
  var EXEC_MIME_TYPE = 'application/vnd.bokehjs_exec.v0+json';
  var CLASS_NAME = 'output_bokeh rendered_html';

  /**
   * Render data to the DOM node
   */
  function render(props, node) {
    var script = document.createElement("script");
    node.appendChild(script);
  }

  /**
   * Handle when an output is cleared or removed
   */
  function handleClearOutput(event, handle) {
    var cell = handle.cell;

    var id = cell.output_area._bokeh_element_id;
    var server_id = cell.output_area._bokeh_server_id;
    // Clean up Bokeh references
    if (id != null && id in Bokeh.index) {
      Bokeh.index[id].model.document.clear();
      delete Bokeh.index[id];
    }

    if (server_id !== undefined) {
      // Clean up Bokeh references
      var cmd = "from bokeh.io.state import curstate; print(curstate().uuid_to_server['" + server_id + "'].get_sessions()[0].document.roots[0]._id)";
      cell.notebook.kernel.execute(cmd, {
        iopub: {
          output: function(msg) {
            var id = msg.content.text.trim();
            if (id in Bokeh.index) {
              Bokeh.index[id].model.document.clear();
              delete Bokeh.index[id];
            }
          }
        }
      });
      // Destroy server and session
      var cmd = "import bokeh.io.notebook as ion; ion.destroy_server('" + server_id + "')";
      cell.notebook.kernel.execute(cmd);
    }
  }

  /**
   * Handle when a new output is added
   */
  function handleAddOutput(event, handle) {
    var output_area = handle.output_area;
    var output = handle.output;

    // limit handleAddOutput to display_data with EXEC_MIME_TYPE content only
    if ((output.output_type != "display_data") || (!output.data.hasOwnProperty(EXEC_MIME_TYPE))) {
      return
    }

    var toinsert = output_area.element.find("." + CLASS_NAME.split(' ')[0]);

    if (output.metadata[EXEC_MIME_TYPE]["id"] !== undefined) {
      toinsert[toinsert.length - 1].firstChild.textContent = output.data[JS_MIME_TYPE];
      // store reference to embed id on output_area
      output_area._bokeh_element_id = output.metadata[EXEC_MIME_TYPE]["id"];
    }
    if (output.metadata[EXEC_MIME_TYPE]["server_id"] !== undefined) {
      var bk_div = document.createElement("div");
      bk_div.innerHTML = output.data[HTML_MIME_TYPE];
      var script_attrs = bk_div.children[0].attributes;
      for (var i = 0; i < script_attrs.length; i++) {
        toinsert[toinsert.length - 1].firstChild.setAttribute(script_attrs[i].name, script_attrs[i].value);
        toinsert[toinsert.length - 1].firstChild.textContent = bk_div.children[0].textContent
      }
      // store reference to server id on output_area
      output_area._bokeh_server_id = output.metadata[EXEC_MIME_TYPE]["server_id"];
    }
  }

  function register_renderer(events, OutputArea) {

    function append_mime(data, metadata, element) {
      // create a DOM node to render to
      var toinsert = this.create_output_subarea(
        metadata,
        CLASS_NAME,
        EXEC_MIME_TYPE
      );
      this.keyboard_manager.register_events(toinsert);
      // Render to node
      var props = {data: data, metadata: metadata[EXEC_MIME_TYPE]};
      render(props, toinsert[toinsert.length - 1]);
      element.append(toinsert);
      return toinsert
    }

    /* Handle when an output is cleared or removed */
    events.on('clear_output.CodeCell', handleClearOutput);
    events.on('delete.Cell', handleClearOutput);

    /* Handle when a new output is added */
    events.on('output_added.OutputArea', handleAddOutput);

    /**
     * Register the mime type and append_mime function with output_area
     */
    OutputArea.prototype.register_mime_type(EXEC_MIME_TYPE, append_mime, {
      /* Is output safe? */
      safe: true,
      /* Index of renderer in `output_area.display_order` */
      index: 0
    });
  }

  // register the mime type if in Jupyter Notebook environment and previously unregistered
  if (root.Jupyter !== undefined) {
    var events = require('base/js/events');
    var OutputArea = require('notebook/js/outputarea').OutputArea;

    if (OutputArea.prototype.mime_types().indexOf(EXEC_MIME_TYPE) == -1) {
      register_renderer(events, OutputArea);
    }
  }

  
  if (typeof (root._bokeh_timeout) === "undefined" || force === true) {
    root._bokeh_timeout = Date.now() + 5000;
    root._bokeh_failed_load = false;
  }

  var NB_LOAD_WARNING = {'data': {'text/html':
     "<div style='background-color: #fdd'>\n"+
     "<p>\n"+
     "BokehJS does not appear to have successfully loaded. If loading BokehJS from CDN, this \n"+
     "may be due to a slow or bad network connection. Possible fixes:\n"+
     "</p>\n"+
     "<ul>\n"+
     "<li>re-rerun `output_notebook()` to attempt to load from CDN again, or</li>\n"+
     "<li>use INLINE resources instead, as so:</li>\n"+
     "</ul>\n"+
     "<code>\n"+
     "from bokeh.resources import INLINE\n"+
     "output_notebook(resources=INLINE)\n"+
     "</code>\n"+
     "</div>"}};

  function display_loaded() {
    var el = document.getElementById("1001");
    if (el != null) {
      el.textContent = "BokehJS is loading...";
    }
    if (root.Bokeh !== undefined) {
      if (el != null) {
        el.textContent = "BokehJS " + root.Bokeh.version + " successfully loaded.";
      }
    } else if (Date.now() < root._bokeh_timeout) {
      setTimeout(display_loaded, 100)
    }
  }


  function run_callbacks() {
    try {
      root._bokeh_onload_callbacks.forEach(function(callback) {
        if (callback != null)
          callback();
      });
    } finally {
      delete root._bokeh_onload_callbacks
    }
    console.debug("Bokeh: all callbacks have finished");
  }

  function load_libs(css_urls, js_urls, callback) {
    if (css_urls == null) css_urls = [];
    if (js_urls == null) js_urls = [];

    root._bokeh_onload_callbacks.push(callback);
    if (root._bokeh_is_loading > 0) {
      console.debug("Bokeh: BokehJS is being loaded, scheduling callback at", now());
      return null;
    }
    if (js_urls == null || js_urls.length === 0) {
      run_callbacks();
      return null;
    }
    console.debug("Bokeh: BokehJS not loaded, scheduling load and callback at", now());
    root._bokeh_is_loading = css_urls.length + js_urls.length;

    function on_load() {
      root._bokeh_is_loading--;
      if (root._bokeh_is_loading === 0) {
        console.debug("Bokeh: all BokehJS libraries/stylesheets loaded");
        run_callbacks()
      }
    }

    function on_error() {
      console.error("failed to load " + url);
    }

    for (var i = 0; i < css_urls.length; i++) {
      var url = css_urls[i];
      const element = document.createElement("link");
      element.onload = on_load;
      element.onerror = on_error;
      element.rel = "stylesheet";
      element.type = "text/css";
      element.href = url;
      console.debug("Bokeh: injecting link tag for BokehJS stylesheet: ", url);
      document.body.appendChild(element);
    }

    const hashes = {"https://cdn.bokeh.org/bokeh/release/bokeh-2.2.3.min.js": "T2yuo9Oe71Cz/I4X9Ac5+gpEa5a8PpJCDlqKYO0CfAuEszu1JrXLl8YugMqYe3sM", "https://cdn.bokeh.org/bokeh/release/bokeh-widgets-2.2.3.min.js": "98GDGJ0kOMCUMUePhksaQ/GYgB3+NH9h996V88sh3aOiUNX3N+fLXAtry6xctSZ6", "https://cdn.bokeh.org/bokeh/release/bokeh-tables-2.2.3.min.js": "89bArO+nlbP3sgakeHjCo1JYxYR5wufVgA3IbUvDY+K7w4zyxJqssu7wVnfeKCq8"};

    for (var i = 0; i < js_urls.length; i++) {
      var url = js_urls[i];
      var element = document.createElement('script');
      element.onload = on_load;
      element.onerror = on_error;
      element.async = false;
      element.src = url;
      if (url in hashes) {
        element.crossOrigin = "anonymous";
        element.integrity = "sha384-" + hashes[url];
      }
      console.debug("Bokeh: injecting script tag for BokehJS library: ", url);
      document.head.appendChild(element);
    }
  };

  function inject_raw_css(css) {
    const element = document.createElement("style");
    element.appendChild(document.createTextNode(css));
    document.body.appendChild(element);
  }

  
  var js_urls = ["https://cdn.bokeh.org/bokeh/release/bokeh-2.2.3.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-widgets-2.2.3.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-tables-2.2.3.min.js"];
  var css_urls = [];
  

  var inline_js = [
    function(Bokeh) {
      Bokeh.set_log_level("info");
    },
    function(Bokeh) {
    
    
    }
  ];

  function run_inline_js() {
    
    if (root.Bokeh !== undefined || force === true) {
      
    for (var i = 0; i < inline_js.length; i++) {
      inline_js[i].call(root, root.Bokeh);
    }
    if (force === true) {
        display_loaded();
      }} else if (Date.now() < root._bokeh_timeout) {
      setTimeout(run_inline_js, 100);
    } else if (!root._bokeh_failed_load) {
      console.log("Bokeh: BokehJS failed to load within specified timeout.");
      root._bokeh_failed_load = true;
    } else if (force !== true) {
      var cell = $(document.getElementById("1001")).parents('.cell').data().cell;
      cell.output_area.append_execute_result(NB_LOAD_WARNING)
    }

  }

  if (root._bokeh_is_loading === 0) {
    console.debug("Bokeh: BokehJS loaded, going straight to plotting");
    run_inline_js();
  } else {
    load_libs(css_urls, js_urls, function() {
      console.debug("Bokeh: BokehJS plotting callback run at", now());
      run_inline_js();
    });
  }
}(window));</script><div class="output text_html">





<div class="bk-root" id="5daf186b-d2db-430e-b83d-6e810c168d63" data-root-id="1002"></div>
</div><script type="application/javascript">(function(root) {
  function embed_document(root) {
    
  var docs_json = {"e41a8acf-b305-43c1-b29c-8d9bc8124f51":{"roots":{"references":[{"attributes":{"background_fill_alpha":0.8,"background_fill_color":"#e8ded5","below":[{"id":"1013"}],"center":[{"id":"1016"},{"id":"1020"},{"id":"1035"}],"left":[{"id":"1017"}],"plot_height":400,"plot_width":700,"renderers":[{"id":"1026"}],"title":{"id":"1003"},"toolbar":{"id":"1021"},"x_range":{"id":"1005"},"x_scale":{"id":"1009"},"y_range":{"id":"1007"},"y_scale":{"id":"1011"}},"id":"1002","subtype":"Figure","type":"Plot"},{"attributes":{},"id":"1011","type":"LinearScale"},{"attributes":{},"id":"1014","type":"BasicTicker"},{"attributes":{"index":2,"label":{"value":"Lambda 0.1"},"renderers":[{"id":"1026"}]},"id":"1038","type":"LegendItem"},{"attributes":{"data_source":{"id":"1022"},"glyph":{"id":"1024"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1025"},"selection_glyph":null,"view":{"id":"1027"}},"id":"1026","type":"GlyphRenderer"},{"attributes":{"line_alpha":{"value":0.6},"line_color":{"field":"color"},"line_width":{"value":2.3},"xs":{"field":"xs"},"ys":{"field":"ys"}},"id":"1024","type":"MultiLine"},{"attributes":{"active_drag":"auto","active_inspect":"auto","active_multi":null,"active_scroll":"auto","active_tap":"auto"},"id":"1021","type":"Toolbar"},{"attributes":{},"id":"1030","type":"BasicTickFormatter"},{"attributes":{},"id":"1005","type":"DataRange1d"},{"attributes":{},"id":"1007","type":"DataRange1d"},{"attributes":{"source":{"id":"1022"}},"id":"1027","type":"CDSView"},{"attributes":{"items":[{"id":"1036"},{"id":"1037"},{"id":"1038"}]},"id":"1035","type":"Legend"},{"attributes":{},"id":"1033","type":"UnionRenderers"},{"attributes":{},"id":"1034","type":"Selection"},{"attributes":{},"id":"1018","type":"BasicTicker"},{"attributes":{"axis":{"id":"1017"},"dimension":1,"grid_line_color":"#ffffff","grid_line_width":2,"ticker":null},"id":"1020","type":"Grid"},{"attributes":{"axis_label":"Probability","formatter":{"id":"1030"},"ticker":{"id":"1018"}},"id":"1017","type":"LinearAxis"},{"attributes":{"line_alpha":{"value":0.1},"line_color":{"field":"color"},"line_width":{"value":2.3},"xs":{"field":"xs"},"ys":{"field":"ys"}},"id":"1025","type":"MultiLine"},{"attributes":{"data":{"color":["#74add1","#fdae61","#f46d43"],"label":["Lambda 0.02","Lambda 0.05","Lambda 0.1"],"xs":[{"__ndarray__":"AAAAAAAAAAB/pUCtXynwP3+lQK1fKQBAPvjggw8+CEB/pUCtXykQQN/OkJi3MxRAPvjggw8+GECeITFvZ0gcQH+lQK1fKSBAL7rooosuIkDfzpCYtzMkQI/jOI7jOCZAPvjggw8+KEDuDIl5O0MqQJ4hMW9nSCxATjbZZJNNLkB/pUCtXykwQNevFKj1KzFAL7rooosuMkCHxLydITEzQN/OkJi3MzRAN9lkk002NUCP4ziO4zg2QOftDIl5OzdAPvjggw8+OECWArV+pUA5QO4MiXk7QzpARhdddNFFO0CeITFvZ0g8QPYrBWr9Sj1ATjbZZJNNPkCmQK1fKVA/QH+lQK1fKUBAq6qqqqqqQEDXrxSo9StBQAO1fqVArUFAL7rooosuQkBbv1Kg1q9CQIfEvJ0hMUNAs8kmm2yyQ0DfzpCYtzNEQAvU+pUCtURAN9lkk002RUBj3s6QmLdFQI/jOI7jOEZAu+iiiy66RkDn7QyJeTtHQBPzdobEvEdAPvjggw8+SEBq/UqBWr9IQJYCtX6lQElAwgcffPDBSUDuDIl5O0NKQBoS83aGxEpARhdddNFFS0ByHMdxHMdLQJ4hMW9nSExAyiabbLLJTED2KwVq/UpNQCIxb2dIzE1ATjbZZJNNTkB6O0Ni3s5OQKZArV8pUE9A0kUXXXTRT0B/pUCtXylQQBWo9SsFalBAq6qqqqqqUEBBrV8pUOtQQNevFKj1K1FAbbLJJptsUUADtX6lQK1RQJm3MyTm7VFAL7rooosuUkDFvJ0hMW9SQFu/UqDWr1JA8cEHH3zwUkCHxLydITFTQB3HcRzHcVNAs8kmm2yyU0BJzNsZEvNTQN/OkJi3M1RAddFFF110VEAL1PqVArVUQKHWrxSo9VRAN9lkk002VUDN2xkS83ZVQGPezpCYt1VA+eCDDz74VUCP4ziO4zhWQCXm7QyJeVZAu+iiiy66VkBR61cK1PpWQOftDIl5O1dAffDBBx98V0AT83aGxLxXQKn1KwVq/VdAPvjggw8+WEDU+pUCtX5YQGr9SoFav1hAAAAAAAAAWUA=","dtype":"float64","order":"little","shape":[100]},{"__ndarray__":"AAAAAAAAAAB/pUCtXynwP3+lQK1fKQBAPvjggw8+CEB/pUCtXykQQN/OkJi3MxRAPvjggw8+GECeITFvZ0gcQH+lQK1fKSBAL7rooosuIkDfzpCYtzMkQI/jOI7jOCZAPvjggw8+KEDuDIl5O0MqQJ4hMW9nSCxATjbZZJNNLkB/pUCtXykwQNevFKj1KzFAL7rooosuMkCHxLydITEzQN/OkJi3MzRAN9lkk002NUCP4ziO4zg2QOftDIl5OzdAPvjggw8+OECWArV+pUA5QO4MiXk7QzpARhdddNFFO0CeITFvZ0g8QPYrBWr9Sj1ATjbZZJNNPkCmQK1fKVA/QH+lQK1fKUBAq6qqqqqqQEDXrxSo9StBQAO1fqVArUFAL7rooosuQkBbv1Kg1q9CQIfEvJ0hMUNAs8kmm2yyQ0DfzpCYtzNEQAvU+pUCtURAN9lkk002RUBj3s6QmLdFQI/jOI7jOEZAu+iiiy66RkDn7QyJeTtHQBPzdobEvEdAPvjggw8+SEBq/UqBWr9IQJYCtX6lQElAwgcffPDBSUDuDIl5O0NKQBoS83aGxEpARhdddNFFS0ByHMdxHMdLQJ4hMW9nSExAyiabbLLJTED2KwVq/UpNQCIxb2dIzE1ATjbZZJNNTkB6O0Ni3s5OQKZArV8pUE9A0kUXXXTRT0B/pUCtXylQQBWo9SsFalBAq6qqqqqqUEBBrV8pUOtQQNevFKj1K1FAbbLJJptsUUADtX6lQK1RQJm3MyTm7VFAL7rooosuUkDFvJ0hMW9SQFu/UqDWr1JA8cEHH3zwUkCHxLydITFTQB3HcRzHcVNAs8kmm2yyU0BJzNsZEvNTQN/OkJi3M1RAddFFF110VEAL1PqVArVUQKHWrxSo9VRAN9lkk002VUDN2xkS83ZVQGPezpCYt1VA+eCDDz74VUCP4ziO4zhWQCXm7QyJeVZAu+iiiy66VkBR61cK1PpWQOftDIl5O1dAffDBBx98V0AT83aGxLxXQKn1KwVq/VdAPvjggw8+WEDU+pUCtX5YQGr9SoFav1hAAAAAAAAAWUA=","dtype":"float64","order":"little","shape":[100]},{"__ndarray__":"AAAAAAAAAAB/pUCtXynwP3+lQK1fKQBAPvjggw8+CEB/pUCtXykQQN/OkJi3MxRAPvjggw8+GECeITFvZ0gcQH+lQK1fKSBAL7rooosuIkDfzpCYtzMkQI/jOI7jOCZAPvjggw8+KEDuDIl5O0MqQJ4hMW9nSCxATjbZZJNNLkB/pUCtXykwQNevFKj1KzFAL7rooosuMkCHxLydITEzQN/OkJi3MzRAN9lkk002NUCP4ziO4zg2QOftDIl5OzdAPvjggw8+OECWArV+pUA5QO4MiXk7QzpARhdddNFFO0CeITFvZ0g8QPYrBWr9Sj1ATjbZZJNNPkCmQK1fKVA/QH+lQK1fKUBAq6qqqqqqQEDXrxSo9StBQAO1fqVArUFAL7rooosuQkBbv1Kg1q9CQIfEvJ0hMUNAs8kmm2yyQ0DfzpCYtzNEQAvU+pUCtURAN9lkk002RUBj3s6QmLdFQI/jOI7jOEZAu+iiiy66RkDn7QyJeTtHQBPzdobEvEdAPvjggw8+SEBq/UqBWr9IQJYCtX6lQElAwgcffPDBSUDuDIl5O0NKQBoS83aGxEpARhdddNFFS0ByHMdxHMdLQJ4hMW9nSExAyiabbLLJTED2KwVq/UpNQCIxb2dIzE1ATjbZZJNNTkB6O0Ni3s5OQKZArV8pUE9A0kUXXXTRT0B/pUCtXylQQBWo9SsFalBAq6qqqqqqUEBBrV8pUOtQQNevFKj1K1FAbbLJJptsUUADtX6lQK1RQJm3MyTm7VFAL7rooosuUkDFvJ0hMW9SQFu/UqDWr1JA8cEHH3zwUkCHxLydITFTQB3HcRzHcVNAs8kmm2yyU0BJzNsZEvNTQN/OkJi3M1RAddFFF110VEAL1PqVArVUQKHWrxSo9VRAN9lkk002VUDN2xkS83ZVQGPezpCYt1VA+eCDDz74VUCP4ziO4zhWQCXm7QyJeVZAu+iiiy66VkBR61cK1PpWQOftDIl5O1dAffDBBx98V0AT83aGxLxXQKn1KwVq/VdAPvjggw8+WEDU+pUCtX5YQGr9SoFav1hAAAAAAAAAWUA=","dtype":"float64","order":"little","shape":[100]}],"ys":[{"__ndarray__":"exSuR+F6lD/cMGCjBhKUP1Y1xdREq5M/08NcH5FGkz/BWJ794OOSP5jd3x8qg5I/Q9xBa2Ikkj+PNqH4f8eRP2hFjhN5bJE/PERJOUQTkT9a7cMX2LuQP8csqIwrZpA/Z89jpDUSkD8gKnIy23+PP9IYqKSV3o4/PUDJxYlAjj/JenoSp6WNP23461vdDY0/iGQoxhx5jD/js2zGVeeLP3tuiCF5WIs/qUlG6nfMij8j6Nx/Q0OKP/2VZ4zNvIk/CNhmAwg5iT8kpkgg5beIP6Up+GRXOYg/BNl0mFG9hz9Iy3DFxkOHPzge9jiqzIY/EksTge9Xhj9NRo5riuWFP5tHngRvdYU/JhislZEHhT+MxRik5puEP+KYCvBiMoQ/wTFAc/vKgz/DpelfpWWDP8qFhx9WAoM/wqrPUQOhgj9crJfLokGCP67kxJUq5IE/ZeRB7JCIgT+YO/k8zC6BPwF81SbT1oA/01nGeJyAgD8H0cowHyyAP6lqAPaksn8/iidsYVsQfz9Mmg2vUHF+P2Ci6UB01X0/b8UYzrU8fT9FmxNhBad8P+TvB1ZTFHw//W42WZCEez9GrVhlrfd6P7tkD8KbbXo/xLlYAk3meT9SYA4Ds2F5P114a+m/33g/e/qZIWZgeD+tjUddmON3P5agQZJJaXc/zKAY+Wzxdj/hK8oL9nt2P3wWcoTYCHY/UiYCXAiYdT/6XADJeSl1P7GxSz4hvXQ/ahnnafNSdD+avMoz5epzP1o7u7zrhHM/ruAmXfwgcz+xpgikDL9yP9Pt0FUSX3I/7clTawMBcj+zyLwQ1qRxP1MViKSASnE//N2AtvnxcD8p4MQGOJtwP4sBzYQyRnA/Grf1nMDlbz9SQFZecUJvP5d+mT1mom4/o2j5gY4Fbj/cx0zI2WttP+nlUAE41Ww/gf77b5lBbD9zSNin7rBrP+hpZ4soI2s/5iyOSjiYaj+lSQhhDxBqP38d5JSfimk/wSUG9doHaT/GFrTXs4doPzRoJ9kcCmg/YzAn2giPZz8/Kan+ahZnP0y6eaw2oGY/lOPqiV8sZj8=","dtype":"float64","order":"little","shape":[100]},{"__ndarray__":"mpmZmZmZqT8aG6xY1FaoP/7U16f0I6c/xmknGTIApj+x6LQdzuqkPyoQNIkT46M/JsidG1booj9qi68Q8vmhPw1F9bRLF6E/GsYXAM8/oD+tz1po3uWeP55pmwNNYJ0/1h1YYevtmz9WewCZx42aPxs/Daz7Ppk/fMvI76wAmD9yl31+C9KWP05Ora9RspU/SPD3lsOglD+0ol6JrpyTP3wFkqhopZI/gNb/c1C6kT9MbFdfzNqQPzAjQG5KBpA/GnkAqn94jj+q06s7UfiMPxucjqUOi4s/PlZiV8kvij/Ca72AnuWIP3Rd73y2q4c/abwoRkSBhj+E7ZLvhGWFP+5BACa/V4Q/iD3htkJXgz/q/C8daGOCP0aRBhSQe4E/ENyYLiOfgD/i8pvqIpt/P0VCcQ+kDH4/MCdihsWRfD/7X6zbjyl7P71efMsX03k/JntEqH2NeD+Og6XI7Fd3P19CifyaMXY/MkAUCcgZdT+UghgrvQ90P+RGt5/MEnM/tcLjMlEicj/9yXzTrT1xPybitixNZHA/c4IniUIrbz8zC08+RqJtPyUr3sykLGw/oyP8LGrJaj+TN5tbrndpP5LG78KUNmg/sv1dqksFZz9+BICtC+NlP9gv6zkXz2Q/2CtfE7rIYz91Pg7eSM9iP2TAsa4g4mE/wrIhoKYAYT8I8iluRypgP6vltSruvF4/sGwu72A5XT87eEMK6shbPzBQ6dOYalo/Xj9UfogdWT/PEoiA3+BXP5fDQwjPs1Y/QH/scpKVVT+y1B/NboVUPyEkmViyglM/4ZEaGLSMUj+yqQ1h06JRP/ubk3J3xFA/nRaBIx7iTz91gYFVIFBOPx6mU+3u0Uw/aLR5S5BmSz8mXcMbFw1KP4XsS7qhxEg/1MIaoFmMRz9s6gXXcmNGP+5Ge3QrSUU/xlzZGss8RD+V9wSBoj1DP1AK7f8KS0I/vgKyJWZkQT/VeClOHYlAP71G9YBCcT8/GJ0mo9PkPT+oeHAW62s8PxCw7a6SBTs/dQaCYOCwOT/19Pyl9Ww4P1nMw+/+ODc/xUKkGTMUNj8=","dtype":"float64","order":"little","shape":[100]},{"__ndarray__":"mpmZmZmZuT/+1Nen9CO3P7HotB3O6rQ/JsidG1bosj8NRfW0SxexP63PWmje5a4/1h1YYevtqz8bPw2s+z6pP3KXfX4L0qY/SPD3lsOgpD98BZKoaKWiP0xsV1/M2qA/GnkAqn94nj8bnI6lDoubP8JrvYCe5Zg/abwoRkSBlj/uQQAmv1eUP+r8Lx1oY5I/ENyYLiOfkD9FQnEPpAyOP/tfrNuPKYs/JntEqH2NiD9fQon8mjGGP5SCGCu9D4Q/tcLjMlEigj8m4rYsTWSAPzMLTz5Gon0/oyP8LGrJej+Sxu/ClDZ4P34EgK0L43U/2CtfE7rIcz9kwLGuIOJxPwjyKW5HKnA/sGwu72A5bT8wUOnTmGpqP88SiIDf4Gc/QH/scpKVZT8hJJlYsoJjP7KpDWHTomE/nRaBIx7iXz8eplPt7tFcPyZdwxsXDVo/1MIaoFmMVz/uRnt0K0lVP5X3BIGiPVM/vgKyJWZkUT+9RvWAQnFPP6h4cBbra0w/dQaCYOCwST9ZzMPv/jhHP4MtdefS/UQ/Xa8uH4f5Qj+ONXjj1SZBP1shy1r2AT8/muxiWlAHPD8iVooO8FU5P6FreEzL5jY/PxWPDoWzND9hRcTRXLYyP8E0MYwf6jA/XuvwKjSULj+I/fS6GaQrP6x+dKJB/Cg/EpTSobqVJj8ubro5PmokPyqyakMgdCI/yKl+HECuID96U+J+9iceP1AqnUtCQhs/UYPSqNCjGD/eGt3pyEUWP3pb9sX6IRQ/nJKTKs4yEj9KrKybNHMQP3g8Y/c3vQ0/muU/McXhCj8xq/e9mEwIP+aY4Czy9gU/sX4hHbfaAz/aY1NJY/IBP04BjBv6OAA/Wnw7SPNT/T6i4/GhnYL6Pp28wI2V9vc+6wExgTKp9T7GZsy1b5TzPs5SOG3csvE+hr+ZcBv/7z49jfM3I+zsPrJCu+TGJOo+6P1c08Kh5z7h7fsKhlzlPg+gDBMhT+M+nZ0hbzZ04T4rcrQw2Y3fPi4skp/Chdw+w4pbUTzI2T7w+BdZHE7XPmmSF/zoENU+r2NQxMcK0z4=","dtype":"float64","order":"little","shape":[100]}]},"selected":{"id":"1034"},"selection_policy":{"id":"1033"}},"id":"1022","type":"ColumnDataSource"},{"attributes":{"axis":{"id":"1013"},"grid_line_color":"#ffffff","grid_line_width":2,"ticker":null},"id":"1016","type":"Grid"},{"attributes":{},"id":"1009","type":"LinearScale"},{"attributes":{"index":0,"label":{"value":"Lambda 0.02"},"renderers":[{"id":"1026"}]},"id":"1036","type":"LegendItem"},{"attributes":{"text":"Exponential Distributions for Airport Time"},"id":"1003","type":"Title"},{"attributes":{"axis_label":"Minutes from door to gate","formatter":{"id":"1032"},"ticker":{"id":"1014"}},"id":"1013","type":"LinearAxis"},{"attributes":{"index":1,"label":{"value":"Lambda 0.05"},"renderers":[{"id":"1026"}]},"id":"1037","type":"LegendItem"},{"attributes":{},"id":"1032","type":"BasicTickFormatter"}],"root_ids":["1002"]},"title":"Bokeh Application","version":"2.2.3"}};
  var render_items = [{"docid":"e41a8acf-b305-43c1-b29c-8d9bc8124f51","root_ids":["1002"],"roots":{"1002":"5daf186b-d2db-430e-b83d-6e810c168d63"}}];
  root.Bokeh.embed.embed_items_notebook(docs_json, render_items);

  }
  if (root.Bokeh !== undefined) {
    embed_document(root);
  } else {
    var attempts = 0;
    var timer = setInterval(function(root) {
      if (root.Bokeh !== undefined) {
        clearInterval(timer);
        embed_document(root);
      } else {
        attempts++;
        if (attempts > 100) {
          clearInterval(timer);
          console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
        }
      }
    }, 10, root)
  }
})(window);</script></div>
</div>
<p>So as we can see from the plot above, higher values of <span class="math notranslate nohighlight">\(\lambda\)</span> make longer wait times less likely. But one observation should bother us: the most likely time (the highest <span class="math notranslate nohighlight">\(y\)</span> value in the plot above) for <em>all</em> values of <span class="math notranslate nohighlight">\(\lambda\)</span> is 0! I may not know in advance how long security is going to take, but I can say for sure that it will take <em>some</em> time. If anything, the value of <span class="math notranslate nohighlight">\(p(0)\)</span> should be 0, not a maximum!</p>
<p>Obviously, this is a bad model. But just like our choice of cost model above, it has the extremely desirable property that we can <em>solve</em> it. That is, we can find an equation for the ideal arrival time <span class="math notranslate nohighlight">\(\tau^*\)</span> as a function of <span class="math notranslate nohighlight">\(\lambda\)</span> and <span class="math notranslate nohighlight">\(R\)</span>. Once we pick the first one based on data, and pick the second one based on our own personal values and preferences, we can plug them in to find out when we should arrive at the airport!</p>
<p>The answer that comes out of this will be <strong>biased</strong>, since it was achieved with a model distribution that we <em>know</em> doesn’t “look” like the real distribution. But it will once again provide a nice launching point, and we can explore more complicated distributions from there.</p>
<p>So the cumulative density function for the exponential distribution looks like</p>
<div class="math notranslate nohighlight">
\[P(T \leq t) = 1 - e^{-\lambda t},\]</div>
<p>which we can plug into our equation above to get</p>
<div class="math notranslate nohighlight">
\[\frac{\lambda e^{-\lambda \tau^*}}{1 - e^{-\lambda \tau^*}} = \frac{1}{R}\]</div>
<div class="math notranslate nohighlight">
\[\Rightarrow\ \ \ \  e^{\lambda \tau^*} = \lambda R + 1\]</div>
<div class="math notranslate nohighlight">
\[\Rightarrow\ \ \ \ \tau^* = \frac{1}{\lambda}\log(\lambda R + 1).\]</div>
<p>So here’s our formula for the idea arrival time! And it makes a fair amount of sense: as <span class="math notranslate nohighlight">\(\lambda\)</span> gets larger, we’re more likely to be able to get to our gate faster, and so <span class="math notranslate nohighlight">\(\tau\)</span> decreases, meaning we don’t need to allow ourselves as much time. Likewise, as <span class="math notranslate nohighlight">\(R\)</span> gets larger, which means we have <em>more</em> tolerance for waiting (it takes more hours of waiting to be as bad as misisng a flight), <span class="math notranslate nohighlight">\(\tau^*\)</span> gets larger too, since we can get there earlier and risk spending some time waiting around. And finally if <span class="math notranslate nohighlight">\(R=0\)</span>, then <em>any</em> amount of waiting becomes unacceptable to us, so we should not allow ourselves <em>any</em> lead time (this is an interesting artifact of the model’s assumption that 0 is the most likely wait time).</p>
<p>The difference between <span class="math notranslate nohighlight">\(\lambda\)</span> and <span class="math notranslate nohighlight">\(R\)</span>, however, is that there is no “right” value of <span class="math notranslate nohighlight">\(R\)</span> for <em>everyone, all the time</em>. We need to make this decision for ourselves each time we have a new flight to make. <span class="math notranslate nohighlight">\(\lambda\)</span>, on the other hand, <em>does</em> have a “true” value (for a given time of day, airport, etc.). Or rather, it has a “best” value that makes our distribution as close as possible to the real one. If we could plug this value in, we could plot <span class="math notranslate nohighlight">\(\tau^*\)</span> as a function of <em>just</em> <span class="math notranslate nohighlight">\(R\)</span>, and you could consult this graph to find your ideal time for your own <span class="math notranslate nohighlight">\(R\)</span> value.</p>
<p>This sounds easier than it is, but if we’re willing to chalk all of the time that goes into <span class="math notranslate nohighlight">\(t\)</span> to security wait times (a reasonably fair approximation for most trips. We can always add a roughly constant offset to account for walking time, etc.), we can take a first swing from <a class="reference external" href="https://www.tsa.gov/news/press/releases/2019/01/19/tsa-statement-checkpoint-operations-january-19">this highly questionable data</a> put out by the TSA a couple years ago. In particular, we can use the observation that</p>
<blockquote>
<div><p>91.2 percent of passengers waited less than 15 minutes</p>
</div></blockquote>
<p>combined with the <a class="reference external" href="https://en.wikipedia.org/wiki/Exponential_distribution#Quantiles">quantile function</a> to compute a <strong>maximum likelihood estimate</strong> of <span class="math notranslate nohighlight">\(\lambda\)</span></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">Range1d</span><span class="p">,</span> <span class="n">LinearAxis</span>

<span class="n">p</span> <span class="o">=</span> <span class="mf">0.912</span>
<span class="n">F</span> <span class="o">=</span> <span class="mi">15</span>
<span class="n">l</span> <span class="o">=</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">p</span><span class="p">)</span> <span class="o">/</span> <span class="n">F</span>
<span class="n">dist</span> <span class="o">=</span> <span class="n">expon</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="mf">1.</span><span class="o">/</span><span class="n">l</span><span class="p">)</span>

<span class="n">plot_kwargs</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Likelihood of Wait Times&quot;</span><span class="p">,</span>
    <span class="s2">&quot;x_axis_label&quot;</span><span class="p">:</span> <span class="s2">&quot;Time (minutes)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;y_axis_label&quot;</span><span class="p">:</span> <span class="s2">&quot;Probability&quot;</span><span class="p">,</span>
    <span class="s2">&quot;y_range&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.02</span><span class="o">*</span><span class="n">l</span><span class="p">)</span>
<span class="p">}</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">plot_utils</span><span class="o">.</span><span class="n">plot_distributions</span><span class="p">({</span><span class="s2">&quot;PDF&quot;</span><span class="p">:</span> <span class="n">dist</span><span class="p">},</span> <span class="n">x_max</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">plot_kwargs</span><span class="o">=</span><span class="n">plot_kwargs</span><span class="p">)</span>

<span class="c1"># plot the CDF as well on a second axis for clarity</span>
<span class="n">cdf_x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">cdf_y</span> <span class="o">=</span> <span class="n">dist</span><span class="o">.</span><span class="n">cdf</span><span class="p">(</span><span class="n">cdf_x</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">extra_y_ranges</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;cdf&quot;</span><span class="p">:</span> <span class="n">Range1d</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="mi">1</span><span class="p">)}</span>
<span class="n">p</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">cdf_x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">cdf_y</span><span class="p">,</span> <span class="n">line_color</span><span class="o">=</span><span class="n">plot_utils</span><span class="o">.</span><span class="n">palette</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">legend_label</span><span class="o">=</span><span class="s2">&quot;CDF&quot;</span><span class="p">,</span> <span class="n">y_range_name</span><span class="o">=</span><span class="s2">&quot;cdf&quot;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">add_layout</span><span class="p">(</span><span class="n">LinearAxis</span><span class="p">(</span><span class="n">y_range_name</span><span class="o">=</span><span class="s2">&quot;cdf&quot;</span><span class="p">,</span> <span class="n">axis_label</span><span class="o">=</span><span class="s2">&quot;Cumulative Probability&quot;</span><span class="p">),</span> <span class="s2">&quot;right&quot;</span><span class="p">)</span>

<span class="n">p</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;MLE Estimate: lambda = </span><span class="si">{:0.3f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">location</span> <span class="o">=</span> <span class="s2">&quot;center_right&quot;</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">





<div class="bk-root" id="a6cd54f2-3297-4ee4-ac57-7358e1eaeb89" data-root-id="1081"></div>
</div><script type="application/javascript">(function(root) {
  function embed_document(root) {
    
  var docs_json = {"325f402b-da22-499c-bd4b-cd1c8f327820":{"roots":{"references":[{"attributes":{"background_fill_alpha":0.8,"background_fill_color":"#e8ded5","below":[{"id":"1092"}],"center":[{"id":"1095"},{"id":"1099"},{"id":"1114"}],"extra_y_ranges":{"cdf":{"id":"1116"}},"left":[{"id":"1096"}],"plot_height":400,"plot_width":700,"renderers":[{"id":"1105"},{"id":"1120"}],"right":[{"id":"1132"}],"title":{"id":"1082"},"toolbar":{"id":"1100"},"x_range":{"id":"1084"},"x_scale":{"id":"1088"},"y_range":{"id":"1086"},"y_scale":{"id":"1090"}},"id":"1081","subtype":"Figure","type":"Plot"},{"attributes":{},"id":"1088","type":"LinearScale"},{"attributes":{"line_alpha":0.1,"line_color":"#fdae61","line_width":2.3,"x":{"field":"x"},"y":{"field":"y"}},"id":"1119","type":"Line"},{"attributes":{"line_alpha":0.6,"line_color":"#fdae61","line_width":2.3,"x":{"field":"x"},"y":{"field":"y"}},"id":"1118","type":"Line"},{"attributes":{"source":{"id":"1117"}},"id":"1121","type":"CDSView"},{"attributes":{"label":{"value":"CDF"},"renderers":[{"id":"1120"}]},"id":"1131","type":"LegendItem"},{"attributes":{"data":{"color":["#74add1"],"label":["PDF"],"xs":[{"__ndarray__":"AAAAAAAAAAAxb2dIzNvJPzFvZ0jM29k/ZZNNNtlk4z8xb2dIzNvpP3+lQK1fKfA/ZZNNNtlk8z9LgVq/UqD2PzFvZ0jM2/k/F1100UUX/T9/pUCtXykAQHIcx3EcxwFAZZNNNtlkA0BYCtT6lQIFQEuBWr9SoAZAPvjggw8+CEAxb2dIzNsJQCTm7QyJeQtAF1100UUXDUAK1PqVArUOQH+lQK1fKRBA+OCDDz74EEByHMdxHMcRQOtXCtT6lRJAZZNNNtlkE0DezpCYtzMUQFgK1PqVAhVA0UUXXXTRFUBLgVq/UqAWQMS8nSExbxdAPvjggw8+GEC3MyTm7QwZQDFvZ0jM2xlAq6qqqqqqGkAk5u0MiXkbQJ4hMW9nSBxAF1100UUXHUCRmLczJOYdQArU+pUCtR5AhA8++OCDH0B/pUCtXykgQDtDYt7OkCBA+OCDDz74IEC1fqVArV8hQHIcx3EcxyFALrrooosuIkDrVwrU+pUiQKj1KwVq/SJAZZNNNtlkI0AiMW9nSMwjQN7OkJi3MyRAm2yyySabJEBYCtT6lQIlQBWo9SsFaiVA0UUXXXTRJUCO4ziO4zgmQEuBWr9SoCZACB988MEHJ0DEvJ0hMW8nQIFav1Kg1idAPvjggw8+KED7lQK1fqUoQLczJObtDClAdNFFF110KUAxb2dIzNspQO4MiXk7QypAq6qqqqqqKkBnSMzbGRIrQCTm7QyJeStA4YMPPvjgK0CeITFvZ0gsQFq/UqDWryxAF1100UUXLUDU+pUCtX4tQJGYtzMk5i1ATTbZZJNNLkAK1PqVArUuQMdxHMdxHC9AhA8++OCDL0BArV8pUOsvQH+lQK1fKTBAXXTRRRddMEA7Q2LezpAwQBoS83aGxDBA+OCDDz74MEDXrxSo9SsxQLV+pUCtXzFAk0022WSTMUByHMdxHMcxQFDrVwrU+jFALrrooosuMkANiXk7Q2IyQOtXCtT6lTJAyiabbLLJMkCo9SsFav0yQIbEvJ0hMTNAZZNNNtlkM0BDYt7OkJgzQCIxb2dIzDNAAAAAAAAANEA=","dtype":"float64","order":"little","shape":[100]}],"ys":[{"__ndarray__":"aR6whFS9xD9zC16XWhLEP1rAwC/ibMM/pSbL6b3Mwj+ScKPXwTHCPzU0lnXDm8E/WN5snpkKwT8lSiSAHH7AP+fJACJL7L8/dL7zCR/lvj9SCAaHbOa9PyDTQbvt77w/QIGsCF8BvD9dTbr+fhq7P0PVWkgOO7o/kaGZms9iuT8e5s2jh5G4P4zeVPv8xrc/GlDSEfgCtz8S3/IhQ0W2P0wJrCGqjbU/L7r1s/rbtD+BjfkaBDC0Pxb3syqXibM/NKQDPIbosj8kiiMgpUyyP2wyjBTJtbE/nPE4t8gjsT/10E37e5awP70NGx68DbA/hlX2OMcSrz/BUhFRnBKuP7wuUT+xGq0/z2zOAcIqrD9eMEjHjEKrP35AFt3RYao/J+OvnVOIqT+4xMJf1rWoP4VI1WUg6qc/28Rvzvkkpz+KUsiELGamPyj77DGEraU/fDRoLs76pD+9uFt02U2kP+PrDZJ2pqM/qB3mnHcEoz9FFtQksGeiP4h5Hyj1z6E/B6ibBx09oT8o4jx7/66gPxqLC4d1JaA/sQfl4LJAnz9zXstnDT+eP3CQu/WzRZ0/P5ZNJGJUnD+xkfzA1WqbPxAj/rrOiJo/znGvEQ+umT9+FpPDWtqYP8c72713DZg/UnJ7zC1Hlz8B2b2KRoeWP9NeV1SNzZU/iQb3Ns8ZlT8kNkzk2muUP6k8gKSAw5M/a1gfSZIgkz/Ipm0g44KSP2aDJOlH6pE/WPqUxpZWkT+1Cyw1p8eQPy6aVf9RPZA/vvB1ZeJujz/lQrQrwGuOPw6E5Tv2cI0/L5yMyj9+jD8J7lBDWpOLP4/WujYFsIo/B72GSALUiT9v2okeFf+IPyUHJFADMYg/GgQ6VpRphz9P2rN7kaiGP9kPe87F7YU/j5T0EP44hT86avKrCIqEP5YtGaG14IM/dMS1fdY8gz/MlP9NPp6CP8XFw5DBBII/2ih2KzZwgT8MhaRec+CAPxgZybpRVYA/O4fyKladfz+Ds9r9tJh+P7yZvW94nH0/w69zT1uofD9kB0CmGrx7Py3QcaV113o/kUidlC36eT8=","dtype":"float64","order":"little","shape":[100]}]},"selected":{"id":"1113"},"selection_policy":{"id":"1112"}},"id":"1101","type":"ColumnDataSource"},{"attributes":{},"id":"1097","type":"BasicTicker"},{"attributes":{},"id":"1113","type":"Selection"},{"attributes":{},"id":"1112","type":"UnionRenderers"},{"attributes":{"end":0.16526845558626732},"id":"1086","type":"Range1d"},{"attributes":{},"id":"1084","type":"DataRange1d"},{"attributes":{},"id":"1093","type":"BasicTicker"},{"attributes":{"data_source":{"id":"1117"},"glyph":{"id":"1118"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1119"},"selection_glyph":null,"view":{"id":"1121"},"y_range_name":"cdf"},"id":"1120","type":"GlyphRenderer"},{"attributes":{"text":"Likelihood of Wait Times"},"id":"1082","type":"Title"},{"attributes":{"data":{"x":{"__ndarray__":"AAAAAAAAAAAxb2dIzNvJPzFvZ0jM29k/ZZNNNtlk4z8xb2dIzNvpP3+lQK1fKfA/ZZNNNtlk8z9LgVq/UqD2PzFvZ0jM2/k/F1100UUX/T9/pUCtXykAQHIcx3EcxwFAZZNNNtlkA0BYCtT6lQIFQEuBWr9SoAZAPvjggw8+CEAxb2dIzNsJQCTm7QyJeQtAF1100UUXDUAK1PqVArUOQH+lQK1fKRBA+OCDDz74EEByHMdxHMcRQOtXCtT6lRJAZZNNNtlkE0DezpCYtzMUQFgK1PqVAhVA0UUXXXTRFUBLgVq/UqAWQMS8nSExbxdAPvjggw8+GEC3MyTm7QwZQDFvZ0jM2xlAq6qqqqqqGkAk5u0MiXkbQJ4hMW9nSBxAF1100UUXHUCRmLczJOYdQArU+pUCtR5AhA8++OCDH0B/pUCtXykgQDtDYt7OkCBA+OCDDz74IEC1fqVArV8hQHIcx3EcxyFALrrooosuIkDrVwrU+pUiQKj1KwVq/SJAZZNNNtlkI0AiMW9nSMwjQN7OkJi3MyRAm2yyySabJEBYCtT6lQIlQBWo9SsFaiVA0UUXXXTRJUCO4ziO4zgmQEuBWr9SoCZACB988MEHJ0DEvJ0hMW8nQIFav1Kg1idAPvjggw8+KED7lQK1fqUoQLczJObtDClAdNFFF110KUAxb2dIzNspQO4MiXk7QypAq6qqqqqqKkBnSMzbGRIrQCTm7QyJeStA4YMPPvjgK0CeITFvZ0gsQFq/UqDWryxAF1100UUXLUDU+pUCtX4tQJGYtzMk5i1ATTbZZJNNLkAK1PqVArUuQMdxHMdxHC9AhA8++OCDL0BArV8pUOsvQH+lQK1fKTBAXXTRRRddMEA7Q2LezpAwQBoS83aGxDBA+OCDDz74MEDXrxSo9SsxQLV+pUCtXzFAk0022WSTMUByHMdxHMcxQFDrVwrU+jFALrrooosuMkANiXk7Q2IyQOtXCtT6lTJAyiabbLLJMkCo9SsFav0yQIbEvJ0hMTNAZZNNNtlkM0BDYt7OkJgzQCIxb2dIzDNAAAAAAAAANEA=","dtype":"float64","order":"little","shape":[100]},"y":{"__ndarray__":"AAAAAAAAAAASYBPc6HygP3uEmFjyOLA/ABZlCKrxtz8LyjG7uWq/P12wRBwXU8M/R6LZsAHTxj+NjIJeEjbKP+rfW/42fc0/DzRZ4KpU0D+OExS2pt3RP95QaM36WdM/xrCqeg/K1D9Kchm2SS7WP3/XjjcLh9c/QlhPkbLU2D8s2fpJmxfaP54EqPUdUNs/AqkwTpB+3D94xrVKRaPdP4K/YTaNvt4/supuxrXQ3z8kSLwXBW3gPzgWDp1p7eA/lk94q6tp4T/QYexY7eHhP/5dW6JPVuI/gYnCdPLG4j8aVe219DPjP1oh70x0neM/jCNXKo4D5D8sqyBQXmbkP3b1Ydn/xeQ/Y6q7AY0i5T9+DYssH3zlP6/b4OvO0uU/J78+B7Qm5j/CMh2C5XfmP9yeO6J5xuY/DGu89YUS5z+msQ5ZH1znP2o0p/xZo+c/JCSKakno5z8iQKeLACvoP/zFCa2Ra+g/253dhA6q6D/fI0s3iOboP7/jKlsPIek/5ZCS/rNZ6T+YejyrhZDpP2+xymqTxek/Zwnnyuv46T9KGkHhnCrqP71Wa0+0Wuo/Q0mYRj+J6j/Y/TiLSrbqPzmWfXji4eo/yP64AxMM6z8ksqi/5zTrP7pxod9rXOs/VNKhOqqC6z9ZdEtOrafrP5a4w0F/y+s/rLt86Cnu6z+sW+fEtg/sPy0FDwsvMOw/FP8fo5tP7D9O5tgrBW7sPxMF6Pxzi+w/wis1KfCn7D8LrBiBgcPsP+YRgJQv3uw/7zABtQH47D+7F9z3/hDtPz127DcuKe0/lP+KF5ZA7T9jS18CPVftP2y2Ii8pbe0/Mb5UoWCC7T87T+Eq6ZbtP+x5uW3Iqu0/8/1e3QO+7T/pGGPAoNDtPw0B2TGk4u0/z3G8IhP07T97rExb8gTuPzNMXHxGFe4/ZkmWABQl7j/Rhbg9XzTuP3M3xGUsQ+4/14UkiH9R7j+dqsuSXF/uP27jRlPHbO4/CIHJd8N57j+yXC+QVIbuP/P69g5+ku4/LaAzSkOe7j+FmXd8p6nuP1j6tsWttO4/fQwjLFm/7j8=","dtype":"float64","order":"little","shape":[100]}},"selected":{"id":"1130"},"selection_policy":{"id":"1129"}},"id":"1117","type":"ColumnDataSource"},{"attributes":{"items":[{"id":"1115"},{"id":"1131"}],"location":"center_right","title":"MLE Estimate: lambda = 0.162"},"id":"1114","type":"Legend"},{"attributes":{},"id":"1090","type":"LinearScale"},{"attributes":{},"id":"1129","type":"UnionRenderers"},{"attributes":{"active_drag":"auto","active_inspect":"auto","active_multi":null,"active_scroll":"auto","active_tap":"auto"},"id":"1100","type":"Toolbar"},{"attributes":{},"id":"1130","type":"Selection"},{"attributes":{"line_alpha":{"value":0.6},"line_color":{"field":"color"},"line_width":{"value":2.3},"xs":{"field":"xs"},"ys":{"field":"ys"}},"id":"1103","type":"MultiLine"},{"attributes":{"index":0,"label":{"value":"PDF"},"renderers":[{"id":"1105"}]},"id":"1115","type":"LegendItem"},{"attributes":{"source":{"id":"1101"}},"id":"1106","type":"CDSView"},{"attributes":{"data_source":{"id":"1101"},"glyph":{"id":"1103"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1104"},"selection_glyph":null,"view":{"id":"1106"}},"id":"1105","type":"GlyphRenderer"},{"attributes":{"axis_label":"Cumulative Probability","formatter":{"id":"1144"},"ticker":{"id":"1143"},"y_range_name":"cdf"},"id":"1132","type":"LinearAxis"},{"attributes":{"line_alpha":{"value":0.1},"line_color":{"field":"color"},"line_width":{"value":2.3},"xs":{"field":"xs"},"ys":{"field":"ys"}},"id":"1104","type":"MultiLine"},{"attributes":{},"id":"1111","type":"BasicTickFormatter"},{"attributes":{"axis_label":"Time (minutes)","formatter":{"id":"1111"},"ticker":{"id":"1093"}},"id":"1092","type":"LinearAxis"},{"attributes":{},"id":"1116","type":"Range1d"},{"attributes":{"axis_label":"Probability","formatter":{"id":"1109"},"ticker":{"id":"1097"}},"id":"1096","type":"LinearAxis"},{"attributes":{},"id":"1143","type":"BasicTicker"},{"attributes":{},"id":"1109","type":"BasicTickFormatter"},{"attributes":{},"id":"1144","type":"BasicTickFormatter"},{"attributes":{"axis":{"id":"1092"},"grid_line_color":"#ffffff","grid_line_width":2,"ticker":null},"id":"1095","type":"Grid"},{"attributes":{"axis":{"id":"1096"},"dimension":1,"grid_line_color":"#ffffff","grid_line_width":2,"ticker":null},"id":"1099","type":"Grid"}],"root_ids":["1081"]},"title":"Bokeh Application","version":"2.2.3"}};
  var render_items = [{"docid":"325f402b-da22-499c-bd4b-cd1c8f327820","root_ids":["1081"],"roots":{"1081":"a6cd54f2-3297-4ee4-ac57-7358e1eaeb89"}}];
  root.Bokeh.embed.embed_items_notebook(docs_json, render_items);

  }
  if (root.Bokeh !== undefined) {
    embed_document(root);
  } else {
    var attempts = 0;
    var timer = setInterval(function(root) {
      if (root.Bokeh !== undefined) {
        clearInterval(timer);
        embed_document(root);
      } else {
        attempts++;
        if (attempts > 100) {
          clearInterval(timer);
          console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
        }
      }
    }, 10, root)
  }
})(window);</script></div>
</div>
<p>So this says that our wait time, will be 10 minutes or less 80% of the time. For most of us, this should ring absurd. But remember, we used a <em>model</em> that was biased towards lower wait times (remember that it treats 0 as the most likely wait time), and fed it <em>data</em> that was likely biased towards lower wait times too (that press release was put out in the midst of a government shut down that was causing travel delays for which the Trump administration was bearing much of the political cost, calling into question its motives. It’s also far too blanket, including travellers from off hours whose wait times don’t reflect the average traveller that we’re concerned with). <em>Of course</em> the results came out low! We’ll work on refining this in the next section, but first let’s do what we set out to do and plot the ideal arrival time as a function of the cost ratio <span class="math notranslate nohighlight">\(R\)</span>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># multiply by 60 to put in units of minutes</span>
<span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">R</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">l</span><span class="o">*</span><span class="n">R</span><span class="o">*</span><span class="mi">60</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">l</span>
<span class="n">plot_kwargs</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Cost Ratio vs. Ideal Arrival Time&quot;</span><span class="p">,</span>
    <span class="s2">&quot;x_axis_label&quot;</span><span class="p">:</span> <span class="s2">&quot;Cost Ratio (hours)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;y_axis_label&quot;</span><span class="p">:</span> <span class="s2">&quot;Ideal Arrival Time (minutes)&quot;</span>
<span class="p">}</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">plot_utils</span><span class="o">.</span><span class="n">plot_functions</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">x_min</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">x_max</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">plot_kwargs</span><span class="o">=</span><span class="n">plot_kwargs</span><span class="p">)</span>
<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">





<div class="bk-root" id="eacb8b55-13e4-4abf-9294-d72cad1ff952" data-root-id="1206"></div>
</div><script type="application/javascript">(function(root) {
  function embed_document(root) {
    
  var docs_json = {"ccad7296-ec50-443e-b905-b248ba82333a":{"roots":{"references":[{"attributes":{"background_fill_alpha":0.8,"background_fill_color":"#e8ded5","below":[{"id":"1217"}],"center":[{"id":"1220"},{"id":"1224"}],"left":[{"id":"1221"}],"plot_height":400,"plot_width":700,"renderers":[{"id":"1229"}],"title":{"id":"1207"},"toolbar":{"id":"1225"},"x_range":{"id":"1209"},"x_scale":{"id":"1213"},"y_range":{"id":"1211"},"y_scale":{"id":"1215"}},"id":"1206","subtype":"Figure","type":"Plot"},{"attributes":{"source":{"id":"1226"}},"id":"1230","type":"CDSView"},{"attributes":{"data":{"x":{"__ndarray__":"AAAAAAAA4D9tsskmm2ziP9lkk0022eQ/RhdddNFF5z+yySabbLLpPx988MEHH+w/jC666KKL7j988MEHH3zwP7LJJptssvE/6aKLLrro8j8ffPDBBx/0P1ZVVVVVVfU/jC666KKL9j/CBx988MH3P/jggw8++Pg/L7rooosu+j9lk0022WT7P5tssskmm/w/0kUXXXTR/T8IH3zwwQf/Px988MEHHwBAuuiiiy66AEBWVVVVVVUBQPDBBx988AFAjC666KKLAkAnm2yyySYDQMIHH3zwwQNAXXTRRRddBED44IMPPvgEQJRNNtlkkwVAL7rooosuBkDKJptssskGQGWTTTbZZAdAAAAAAAAACECbbLLJJpsIQDbZZJNNNglA0kUXXXTRCUBtsskmm2wKQAgffPDBBwtAo4suuuiiC0A++OCDDz4MQNlkk0022QxAddFFF110DUAQPvjggw8OQKuqqqqqqg5ARhdddNFFD0Dhgw8++OAPQD744IMPPhBAjC666KKLEEDaZJNNNtkQQCebbLLJJhFAdNFFF110EUDCBx988MERQBA++OCDDxJAXXTRRRddEkCrqqqqqqoSQPjggw8++BJARhdddNFFE0CUTTbZZJMTQOGDDz744BNAL7rooosuFEB88MEHH3wUQMomm2yyyRRAF1100UUXFUBlk0022WQVQLPJJptsshVAAAAAAAAAFkBONtlkk00WQJtssskmmxZA6aKLLrroFkA22WSTTTYXQIQPPvjggxdA0kUXXXTRF0AffPDBBx8YQG2yySabbBhAuuiiiy66GEAIH3zwwQcZQFZVVVVVVRlAo4suuuiiGUDxwQcffPAZQD744IMPPhpAjC666KKLGkDZZJNNNtkaQCebbLLJJhtAddFFF110G0DCBx988MEbQBA++OCDDxxAXXTRRRddHECrqqqqqqocQPjggw8++BxARhdddNFFHUCUTTbZZJMdQOGDDz744B1AL7rooosuHkB88MEHH3weQMomm2yyyR5AGF100UUXH0Blk0022WQfQLPJJptssh9AAAAAAAAAIEA=","dtype":"float64","order":"little","shape":[100]},"y":{"__ndarray__":"SrgIC7fTJUDfNXPmw0knQOJ7SRIwmChAsoxvoZTGKUCozofci9oqQGt5p8xV2CtAnNKsbT/DLEDMzTgV5p0tQAymJv5kai5ACdTy9XQqL0BNAQ3zgt8vQK0XDkVgRTBApa13E5iWMECHDtMj1+MwQLu0QUh8LTFAlfT0pdlzMUAwrfbeNrcxQJqAoMrS9zFAu6591+Q1MkCO6T4qnnEyQEt9Y4gqqzJAJoOgGbHiMkAgA28IVRgzQDW3Ogg2TDNANfs5xnB+M0D5XOFIH68zQLG0EUFZ3jNARUd9TzQMNEBeuUJAxDg0QKB5Wj4bZDRAxCAmAEqONECzLTTuX7c0QLHPGUVr3zRAn18dM3kGNUDUokzylSw1QAxdgN/MUTVA99e5jih2NUDt6TXdspk1QHPrggF1vDVAXF/bmXfeNUBLXf24wv81QF60rvFdIDZA0PEWYVBANkB0wBK4oF82QB1Dn0NVfjZAIPV39HOcNkAoIv5lAro2QFEPfuQF1zZA5WXjcoPzNkBXQuzPfw83QD5q6Hr/KjdA4Y0QuAZGN0AnE4CUmWA3QAWx2um7ejdAsROmYXGUN0Ag1l54va03QB5PT4CjxjdA2PstpCbfN0ANs4jpSfc3QONAATMQDzhASZBfQnwmOECIGn26kD04QGP1DCFQVDhAS4ND4LxqOEBkfWBI2YA4QPbLHZGnljhA/WUF2ymsOEATO7AwYsE4QAf774dS1jhA4GPlwvzqOEBlmASxYv84QA/fCBCGEzlADwrZjGgnOUBdrV3ECzs5QHwuSkRxTjlA2KLZi5phOUBZXYAMiXQ5QLf4kio+hzlAzpvjPbuZOUBhJVaSAaw5QCrfa2gSvjlAVEvH9e7POUDrk6hlmOE5QGkZY9kP8zlA4ZPMaFYEOkCVMaYibRU6QMYVAA1VJjpAIJOXJQ83OkCVdjBinEc6QD6x6bD9VzpAQKqN+DNoOkBYfN4YQHg6QD9e3uoiiDpAX3AUQd2XOkB3Js7nb6c6QPx/XaXbtjpAsT5UOiHGOkCRR7xhQdU6QHFXTdE85DpA3jGgORTzOkA=","dtype":"float64","order":"little","shape":[100]}},"selected":{"id":"1255"},"selection_policy":{"id":"1254"}},"id":"1226","type":"ColumnDataSource"},{"attributes":{},"id":"1254","type":"UnionRenderers"},{"attributes":{},"id":"1218","type":"BasicTicker"},{"attributes":{},"id":"1253","type":"BasicTickFormatter"},{"attributes":{"active_drag":"auto","active_inspect":"auto","active_multi":null,"active_scroll":"auto","active_tap":"auto"},"id":"1225","type":"Toolbar"},{"attributes":{"axis_label":"Ideal Arrival Time (minutes)","formatter":{"id":"1251"},"ticker":{"id":"1222"}},"id":"1221","type":"LinearAxis"},{"attributes":{"axis":{"id":"1221"},"dimension":1,"grid_line_color":"#ffffff","grid_line_width":2,"ticker":null},"id":"1224","type":"Grid"},{"attributes":{},"id":"1215","type":"LinearScale"},{"attributes":{},"id":"1211","type":"DataRange1d"},{"attributes":{"line_alpha":0.1,"line_color":"#1f77b4","line_width":2.3,"x":{"field":"x"},"y":{"field":"y"}},"id":"1228","type":"Line"},{"attributes":{},"id":"1255","type":"Selection"},{"attributes":{},"id":"1213","type":"LinearScale"},{"attributes":{"line_alpha":0.6,"line_color":"#1f77b4","line_width":2.3,"x":{"field":"x"},"y":{"field":"y"}},"id":"1227","type":"Line"},{"attributes":{"axis":{"id":"1217"},"grid_line_color":"#ffffff","grid_line_width":2,"ticker":null},"id":"1220","type":"Grid"},{"attributes":{"text":"Cost Ratio vs. Ideal Arrival Time"},"id":"1207","type":"Title"},{"attributes":{"data_source":{"id":"1226"},"glyph":{"id":"1227"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"1228"},"selection_glyph":null,"view":{"id":"1230"}},"id":"1229","type":"GlyphRenderer"},{"attributes":{"axis_label":"Cost Ratio (hours)","formatter":{"id":"1253"},"ticker":{"id":"1218"}},"id":"1217","type":"LinearAxis"},{"attributes":{},"id":"1222","type":"BasicTicker"},{"attributes":{},"id":"1209","type":"DataRange1d"},{"attributes":{},"id":"1251","type":"BasicTickFormatter"}],"root_ids":["1206"]},"title":"Bokeh Application","version":"2.2.3"}};
  var render_items = [{"docid":"ccad7296-ec50-443e-b905-b248ba82333a","root_ids":["1206"],"roots":{"1206":"eacb8b55-13e4-4abf-9294-d72cad1ff952"}}];
  root.Bokeh.embed.embed_items_notebook(docs_json, render_items);

  }
  if (root.Bokeh !== undefined) {
    embed_document(root);
  } else {
    var attempts = 0;
    var timer = setInterval(function(root) {
      if (root.Bokeh !== undefined) {
        clearInterval(timer);
        embed_document(root);
      } else {
        attempts++;
        if (attempts > 100) {
          clearInterval(timer);
          console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
        }
      }
    }, 10, root)
  }
})(window);</script></div>
</div>
<p>So as we expect, the ideal arrival times are a bit low. For a cost ration of 8, meaning we can wait a full 8 hours before we decide that we would have rather just missed the flight, the recommended arrival lead time is only about 27 minutes. Clearly, there are some flaws here. Let’s take a second to review the steps in this argument thus far which might lead to disagreement with these conclusions, and how they lead to them. I’ll ignore the choice of the cost model, which we’re going to accept as true for now.</p>
<ul class="simple">
<li><p>The choice of the exponential distribution, which biases our estimates towards lower wait times</p></li>
<li><p>The choice of the <span class="math notranslate nohighlight">\(\lambda\)</span> parameter in that distribution, which was calculated based off of shaky data</p></li>
<li><p>The choice of <span class="math notranslate nohighlight">\(R\)</span>, which will vary from person to person and place them at a different point on the curve above.</p></li>
</ul>
<p>The first and second points, the disagreements ultimately come down to data modelling decisions, and can only be settled by validation of models on <em>new</em> data (though compelling <em>prior</em> reasons to prefer one distribution over another, e.g. our observation about 0 being the most likely time in the exponential, certainly help to motivate our decision making). The last, as we’ve discussed is a disagreement over <em>values</em> that can only be settled by arguing about why one set of tastes is better than another. So we haven’t quite settled anything, but at least now we know what we’re arguing about.</p>
<p>In the next section, we’ll make our model a bit more complicated, and take a look at some better day that we can use to fit it more appropriately.</p>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Alec Gunny<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="_static/js/index.3da636dd464baa7582d2.js"></script>


    
  </body>
</html>